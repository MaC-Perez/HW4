<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anchovy Bay: an imaginary ecosystem model • AnchovyBay</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Anchovy Bay: an imaginary ecosystem model">
<meta property="og:description" content="AnchovyBay">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AnchovyBay</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Anchovy_Bay.html">Anchovy Bay: an imaginary ecosystem model</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Anchovy_Bay_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Anchovy Bay: an imaginary ecosystem model</h1>
            
      
      
      <div class="hidden name"><code>Anchovy_Bay.Rmd</code></div>

    </div>

    
    
<p>Developed by Villy Christensen and modified by Sean Lucey</p>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The purpose of this exercise is to introduce you to the concept of mass balance using the R package Rpath, an implementation of the popular EwE software. It will demonstrate the type of data that you need to parameterize your own model and have you develop a mass balance model of the imaginary ecosystem, Anchovy Bay. Anchovy Bay is a popular tourist attraction due to its century-old fishing port and its newer whale-watching industry. The fisheries have declined over the last decades, and have shifted from a focus on groundfish to being dominated by shrimp and pelagic fisheries.</p>
<p>The bay covers an area of <strong>100 km2</strong> and is rather isolated from other marine systems, and we can assume that the populations stay in the bay year-round. Our model will have the following 16 groups. The first 10 are living: <strong>whales, seals, cod, whiting, mackerel, anchovy, shrimp, benthos, zooplankton</strong>, and <strong>phytoplankton</strong>. There is one detrital group called <strong>detritus</strong>. In addition, there are 5 fleets: <strong>sealers, trawlers, seiners, bait boats</strong>, and <strong>shrimpers</strong>.</p>
</div>
<div id="starting-off" class="section level2">
<h2 class="hasAnchor">
<a href="#starting-off" class="anchor"></a>Starting off</h2>
<p>We will start by building the parameter file for Rpath. Make sure you have downloaded the package Rpath and all of its dependencies. Start a new R script, load the package, and create a vector of group names.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/NOAA-EDAB/Rpath">Rpath</a></span><span class="op">)</span>; <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-datatable.com">data.table</a></span><span class="op">)</span>

<span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'whales'</span>, <span class="st">'seals'</span>, <span class="st">'cod'</span>, <span class="st">'whiting'</span>, <span class="st">'mackerel'</span>, <span class="st">'anchovy'</span>, <span class="st">'shrimp'</span>,
            <span class="st">'benthos'</span>, <span class="st">'zooplankton'</span>, <span class="st">'phytoplankton'</span>, <span class="st">'detritus'</span>, <span class="st">'sealers'</span>, 
            <span class="st">'trawlers'</span>, <span class="st">'seiners'</span>, <span class="st">'bait boats'</span>, <span class="st">'shrimpers'</span><span class="op">)</span></code></pre></div>
<p>The next step is to create a vector of group types. Consumers are 0, producers are 1, detrital groups are 2, and fleets are 3. Once you have those two vectors you can create the skeleton of the parameter file using the create.rpath.param function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">types</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">9</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>

<span class="va">AB.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Rpath/man/create.rpath.params.html">create.rpath.params</a></span><span class="op">(</span><span class="va">groups</span>, <span class="va">types</span><span class="op">)</span></code></pre></div>
<p>The rest of the assignment will be using the available data to populate the parameter file. The rpath parameter object is of a class called data.table that can be filled similar to a sql statement. A typical sql statement is <strong>“select x from y where z = a”</strong>. A data.table would pull up the same data as <strong>y[z == a, x]</strong>. You can also assign a value to x using the “:=” operator. For example, if your parameter file is named AB.params and you want to enter the trawlers’ catch of cod as 0.45</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">AB.params</span><span class="op">$</span><span class="va">model</span><span class="op">[</span><span class="va">Group</span> <span class="op">==</span> <span class="st">'cod'</span>, <span class="va">trawlers</span> <span class="op">:=</span> <span class="fl">0.45</span><span class="op">]</span> </code></pre></div>
<p>(“$model” is necessary because AB.params is a list of several different parameter files).</p>
</div>
<div id="available-data" class="section level2">
<h2 class="hasAnchor">
<a href="#available-data" class="anchor"></a>Available Data:</h2>
<div id="fisheries-data" class="section level3">
<h3 class="hasAnchor">
<a href="#fisheries-data" class="anchor"></a>Fisheries Data:</h3>
<p>The sealers caught <span class="math inline">\(15\)</span> seals with an average weight of <span class="math inline">\(30 kg\)</span>. The fisheries catches were <span class="math inline">\(45 t\)</span> of cod and <span class="math inline">\(20 t\)</span> of whiting for the trawlers, <span class="math inline">\(40 t\)</span> of mackerel and <span class="math inline">\(120 t\)</span> of anchovy for the seiners, <span class="math inline">\(20 t\)</span> of anchovy for the bait boats, and <span class="math inline">\(5 t\)</span> of shrimp for the shrimpers. Calculate catches using the appropriate unit (<span class="math inline">\(t/km^2/year\)</span>), and enter in Rpath.</p>
</div>
<div id="biological-data" class="section level3">
<h3 class="hasAnchor">
<a href="#biological-data" class="anchor"></a>Biological Data:</h3>
<p>We now should enter the basic input parameters. Fortunately, the biologists have been busy, and we have some survey estimates of biomasses in the bay. The biomasses must be entered with the unit: <span class="math inline">\(t/km^2\)</span>.</p>
<p>Whales: <span class="math inline">\(10\)</span> individuals with an average weight of <span class="math inline">\(800 kg\)</span>. Seals: <span class="math inline">\(203\)</span> individuals with an average weight of <span class="math inline">\(30 kg\)</span>. Cod: <span class="math inline">\(310 t\)</span>. Whiting <span class="math inline">\(170 t\)</span>. Mackerel: <span class="math inline">\(122 t\)</span>. Anchovy: <span class="math inline">\(600 t\)</span>. Shrimp: <span class="math inline">\(0.8 t/km^2\)</span>. Zooplankton: <span class="math inline">\(14.8 t/km^2\)</span>. Detritus: <span class="math inline">\(10 t/km^2\)</span>.</p>
<p>Next are production/biomass ratios, which with certain assumptions correspond to the total mortality, Z. The unit is <span class="math inline">\(year^{-1}\)</span>, and we can often get Z from assessments. Alternatively, we have Z = F + M, so if we have the catch and the biomass, we can estimate F = C/B and add the total natural mortality to get Z. We can get estimates of M and Q/B from <a href="fishbase.org">FishBase</a>. Search for the species, (<em>Gadus morhua, Merlangius merlangus, Scomber scombrus, Engraulis encrasicolus</em>), find the life-history table, and extract the values. Estimate Z = F + M.</p>
<p>It is also an option for exploited species to use an equation for estimation of Z that was developed by Beverton and Holt (1957). It is implemented in the life-history table in FishBase. It relies on estimates of length at first capture (Lc), average length in the catch (Lmean), and asymptotic length (Linf) to estimate Z. Try it for the four fish species in our model. Here are the lengths from the fishery in Anchovy Bay:</p>
<table class="table">
<caption>Length information from the fisheries within Achovy Bay.</caption>
<thead><tr class="header">
<th align="center">Group</th>
<th align="center">Lc (cm)</th>
<th align="center">Lmean (cm)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Cod</td>
<td align="center">52.0</td>
<td align="center">72.0</td>
</tr>
<tr class="even">
<td align="center">Whiting</td>
<td align="center">17.1</td>
<td align="center">26.5</td>
</tr>
<tr class="odd">
<td align="center">Mackerel</td>
<td align="center">18.9</td>
<td align="center">26.0</td>
</tr>
<tr class="even">
<td align="center">Anchovy</td>
<td align="center">6.8</td>
<td align="center">10.0</td>
</tr>
</tbody>
</table>
<p>Compare the Z estimates from the two methods (and consider).</p>
<p>There is a close relationship between size and P/B; the bigger animals are, the lower the P/B. Here we have: Whales: P/B = <span class="math inline">\(0.05 year^{-1}\)</span>; seals: get F from catch, and M is <span class="math inline">\(0.09 year^{-1}\)</span>; shrimp P/B = <span class="math inline">\(3 year^{-1}\)</span>; benthos P/B = <span class="math inline">\(3 year^{-1}\)</span>; zooplankton: it is mainly small Acartia-sized plankton, with P/B = <span class="math inline">\(35 year^{-1}\)</span>.<br>
We can get P/B for many invertebrates from Tom Brey’s work (but don’t need to for this tutorial). Check out: <a href="http://www.thomas-brey.de/science/virtualhandbook/" class="uri">http://www.thomas-brey.de/science/virtualhandbook/</a>. There is a neat collection of empirical relationships and conversion factors.</p>
<p>Consumption/biomass ratios for the non-fish groups: for whales use <span class="math inline">\(9 year^{-1}\)</span>, and for seals <span class="math inline">\(15 year^{-1}\)</span>. For the invertebrates enter a P/Q ratio of 0.25 instead of entering a Q/B. Finally, there is phytoplankton. We can often get primary production estimates from SeaWiFS satellite data. Here we have PP = <span class="math inline">\(240 gC/m^2/year\)</span>. The conversion factor from <span class="math inline">\(gC\)</span> to <span class="math inline">\(gWW\)</span> is 9, so an easy way to parameterize this is to enter a biomass of <span class="math inline">\(9 t/km^2\)</span> for phytoplankton and a P/B of <span class="math inline">\(240/year\)</span>. Ecopath uses the product of these, so it doesn’t really matter how they are distributed, but the P/B indicates a turnover of less than once per day, which is reasonable.</p>
<p>Next parameter is Ecotrophic Efficiency (EE), this is the part of the production that is used in the system (or rather for which the model explains the fate of the production). For benthos, we are missing a biomass estimate. We do not explain much of the mortality for this group, so guess an EE = <span class="math inline">\(0.6\)</span>.</p>
</div>
<div id="diets" class="section level3">
<h3 class="hasAnchor">
<a href="#diets" class="anchor"></a>Diets:</h3>
<table class="table">
<caption>Diet composition within Achovy Bay.</caption>
<thead><tr class="header">
<th align="center">Prey/Pred</th>
<th align="center">Whales</th>
<th align="center">Seals</th>
<th align="center">Cod</th>
<th align="center">Whiting</th>
<th align="center">Mackerel</th>
<th align="center">Anchovy</th>
<th align="center">Shrimp</th>
<th align="center">Benthos</th>
<th align="center">Zoop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">Whales</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Seals</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Cod</td>
<td align="center">0.1</td>
<td align="center">0.04</td>
<td align="center">NA</td>
<td align="center">0.05</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Whiting</td>
<td align="center">0.1</td>
<td align="center">0.05</td>
<td align="center">0.05</td>
<td align="center">0.05</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Mackerel</td>
<td align="center">0.2</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">0.05</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Anchovy</td>
<td align="center">0.5</td>
<td align="center">NA</td>
<td align="center">0.10</td>
<td align="center">0.45</td>
<td align="center">0.50</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Shrimp</td>
<td align="center">NA</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">0.01</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Benthos</td>
<td align="center">0.1</td>
<td align="center">0.90</td>
<td align="center">0.84</td>
<td align="center">0.44</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">1</td>
<td align="center">0.1</td>
<td align="center">NA</td>
</tr>
<tr class="odd">
<td align="center">Zooplankton</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">0.45</td>
<td align="center">1</td>
<td align="center">NA</td>
<td align="center">0.1</td>
<td align="center">NA</td>
</tr>
<tr class="even">
<td align="center">Phytoplankton</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">0.1</td>
<td align="center">0.9</td>
</tr>
<tr class="odd">
<td align="center">Detritus</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">NA</td>
<td align="center">0.7</td>
<td align="center">0.1</td>
</tr>
</tbody>
</table>
<p>You now have the information that is needed to do mass-balance on this model. Run the rpath.check.param function to make sure that the model has the data it needs. Then run the rpath function. Make sure the model is balanced and explore the different mortality rates on each species. Also plot the food web using the built in function webplot.</p>
</div>
</div>
<div id="exploring-ecosim-with-anchovy-bay" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-ecosim-with-anchovy-bay" class="anchor"></a>Exploring Ecosim with Anchovy Bay</h2>
<p>Scientists have noticed a gradual decline in the seal population of about 50 kg a year. The resource managers of Anchovy Bay decide that new regulations should be put in place on the seal fishery to combat this population decline. Local trawlers are concerned that an increased seal population will negatively impact their business as their chief targets are prey for seals. Build an rsim scenario that shows the impact of the seal decline and one that shows the impact of reducing the seal fishery in half. Also test the impact if seals are a strong ‘top-down’ predator. Run the simulations for 25 years.</p>
<p>Several years later, ecotourism becomes a big part of Anchovy Bay. A portion of the trawlers shift their effort to taking customers whale watching. What is the impact on the groundfish species? What if cod are a strong ‘top-down’ predator? It has been studied that whiting will increase their consumption when at lower numbers. What effect does this have on the previous scenario?</p>
<p>Scenarios can be viewed as a table or as a graph. The built in function in Rpath for graphing the results is rsim.plot. Play around with whatever other scenario you can think up.</p>
<p>Run scenarios varying level of trawling effort. Find the effort leading to maximum long-term yield for the trawl fishery. Plot and discuss implications for species biomass, mix of species in the trawl catch, and impact on other gears associated with fishing at maximum yield for trawl.</p>
<p>Finally, develop two or more strategies to test in an MSE framework within Anchovy Bay. The management objective is to maximize fishery yield but not allowing any species to go below <span class="math inline">\(1/2\ B_{MSY}\)</span>. Show tradeoffs between fisheries. Assuming that cod sells for $3/pound, mackerel $2/pound, whiting $1/pound, shrimp $4/pound, and anchovies $0.50/pound is one of your strategies more economically beneficial to the community? The <code>AB_closed_loop.R</code> script can help you set-up the closed loop simulation.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sean Lucey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
